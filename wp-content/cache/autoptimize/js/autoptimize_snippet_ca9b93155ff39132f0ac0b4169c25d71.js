(function(){window.addEventListener("load",function(){var buttons=document.createRange().createContextualFragment(document.querySelector("#playback-buttons-template").innerHTML);var els=[].slice.call(document.querySelectorAll('.mejs-container'));els.forEach(function(elem,i){var mediaTag=elem.querySelector('audio,video');[].slice.call(buttons.querySelectorAll('.playback-rate-button')).forEach(function(elem){elem.setAttribute('aria-controls',mediaTag.id);});var controls=elem.querySelector('.mejs-controls');if(controls){var container=controls.querySelector('.mejs-duration-container'),hasSpeedControls=controls.querySelector('.playback-rate-button');if(!hasSpeedControls){container.parentNode.insertBefore(buttons.cloneNode(true),container.nextSibling);}}});});[].slice.call(document.querySelectorAll('audio,video')).forEach(function(elem){elem.addEventListener('loadedmetadata',function(e){var playlist=e.target.closest('.wp-playlist');var activeSpeed,rate;if(playlist){activeSpeed=playlist.querySelector('.mejs-container .playback-rate-button.mejs-active');rate=activeSpeed.dataset.value;}else{activeSpeed=document.querySelector('.playback-rate-button.mejs-active, .playback-rate-button.active-playback-rate');if(activeSpeed){rate=activeSpeed.dataset.value;}}
if(!rate){return;}
e.target.playbackRate=rate;});});document.body.addEventListener('click',function(e){if(!e.target||!e.target.classList.contains('playback-rate-button')){return;}
var targetId=e.target.getAttribute('aria-controls')
mediaTag=document.getElementById(targetId);var rate=e.target.dataset.value;if(!rate){return;}
if(mediaTag){mediaTag.playbackRate=rate;}else{[].slice.call(document.querySelectorAll('audio, video')).forEach(function(elem){elem.playbackRate=rate;});}
var mediaPlaybackContainer;if(mediaTag){mediaPlaybackContainer=mediaTag.closest('.mejs-container');}
if(!mediaTag||!mediaPlaybackContainer){mediaPlaybackContainer=mediaTag||document.body;}
[].slice.call(mediaPlaybackContainer.querySelectorAll('.playback-rate-button')).map(function(elem){elem.classList.remove('mejs-active','active-playback-rate');});[].slice.call(mediaPlaybackContainer.querySelectorAll('.playback-rate-button')).forEach(function(elem){if(rate&&elem.dataset.value==rate){elem.classList.add('mejs-active','active-playback-rate');}});});})();